{"ast":null,"code":"import _slicedToArray from \"/Users/arjunramesan/Documents/Projects/searchbar-widget/byjus-searchbar-widget/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport { MathJaxContext, MathJax } from 'better-react-mathjax';\nvar styles = {\n  \"byjus_search_widget_searchBarHolder\": \"_styles-module__byjus_search_widget_searchBarHolder__2e8V-\",\n  \"byjus_search_widget_showinmobile\": \"_styles-module__byjus_search_widget_showinmobile__1sWi4\",\n  \"byjus_search_widget_showindesktop\": \"_styles-module__byjus_search_widget_showindesktop__lixBG\",\n  \"byjus_search_widget_searchBar\": \"_styles-module__byjus_search_widget_searchBar__1kt2A\",\n  \"byjus_search_widget_buttonContainer\": \"_styles-module__byjus_search_widget_buttonContainer__1stDp\",\n  \"byjus_search_widget_crossButtonHolder\": \"_styles-module__byjus_search_widget_crossButtonHolder__3x-TS\",\n  \"byjus_search_widget_buttonHolder\": \"_styles-module__byjus_search_widget_buttonHolder__AJfTZ\",\n  \"byjus_search_widget_icon\": \"_styles-module__byjus_search_widget_icon__BtSIS\",\n  \"byjus_search_widget_modal\": \"_styles-module__byjus_search_widget_modal__3TjXZ\",\n  \"byjus_search_widget_suggestionHolder\": \"_styles-module__byjus_search_widget_suggestionHolder__3MQD7\",\n  \"byjus_search_widget_searchbuttonHolder\": \"_styles-module__byjus_search_widget_searchbuttonHolder__3JPjB\",\n  \"byjus_search_widget_askADoubtPopupTopbannerCrossIcon\": \"_styles-module__byjus_search_widget_askADoubtPopupTopbannerCrossIcon__dnK_q\",\n  \"byjus_search_widget_cameraButtonHolder1\": \"_styles-module__byjus_search_widget_cameraButtonHolder1__2_3Lp\",\n  \"byjus_search_widget_cameraButtonHolder2\": \"_styles-module__byjus_search_widget_cameraButtonHolder2__qpuh-\",\n  \"byjus_search_widget_suggestionBox\": \"_styles-module__byjus_search_widget_suggestionBox__3r6G_\",\n  \"byjus_search_widget_historyBox\": \"_styles-module__byjus_search_widget_historyBox__1DDKh\",\n  \"byjus_search_widget_clockIcon\": \"_styles-module__byjus_search_widget_clockIcon__3xErD\",\n  \"byjus_search_widget_myQuestionHolder\": \"_styles-module__byjus_search_widget_myQuestionHolder__3g8iQ\",\n  \"byjus_search_widget_uploadButtonHolder\": \"_styles-module__byjus_search_widget_uploadButtonHolder__5PdOG\",\n  \"byjus_search_widget_thumbnailContainer\": \"_styles-module__byjus_search_widget_thumbnailContainer__118e1\",\n  \"byjus_search_widget_cameraImageCropperContainer\": \"_styles-module__byjus_search_widget_cameraImageCropperContainer__2hPAQ\",\n  \"byjus_search_widget_popupTitle\": \"_styles-module__byjus_search_widget_popupTitle__21lqL\"\n};\n\nvar SearchbarComponent = function SearchbarComponent(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pageLoaded = _useState4[0],\n      setPageLoaded = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      searchKeyword = _useState6[0],\n      setSearchKeyword = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      suggestions = _useState8[0],\n      setSuggestions = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      history = _useState10[0],\n      setHistory = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      inputFocus = _useState12[0],\n      setInputFocus = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      openMobileCam = _useState14[0],\n      setopenMobileCam = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      openDesktopPopup = _useState16[0],\n      setOpenDesktopPopup = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      imgUploaded = _useState18[0],\n      setimgUploaded = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      focusSearchbar = _useState20[0],\n      setFocusSearchbar = _useState20[1];\n\n  var typeDelay = 500;\n  var origin = 'learnportal2';\n  var API_ENDPOINT = 'https://search-api-stg.byjusweb.com/byjus/web_search/';\n  var AUTH_KEY = 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiI2MDVhMzc5MTg2M2YzYTViZTE0YjE0NzgiLCJyb2xlIjoiYnlqdS1hbnN3ZXItcmV2aWV3ZXIiLCJ0aW1lc3RhbXAiOiIyMDIxLTA1LTEwVDEwOjM0OjM4LjUyNloiLCJpYXQiOjE2MjA2NDI4Nzh9.f5xoVcgtvWAOwOnbc-VCMDjRwt7P4Pax5ftUL2TRUJQ';\n  useEffect(function () {\n    console.log('Hello');\n  }, []);\n  useEffect(function () {\n    var timeoutId = setTimeout(function () {\n      if (searchKeyword) {\n        get_suggestions(searchKeyword, getCookie('docId'), getCookie('userToken')).then(function (r) {\n          return r.json();\n        }).then(function (res) {\n          var tempArray = [];\n\n          for (var i = 0; i < res['suggestions'].length; i++) {\n            tempArray.push({\n              'question_text': res['suggestions'][i]['mathjax_question'],\n              'question_id': res['suggestions'][i]['qid'],\n              'href': res['suggestions'][i]['href']\n            });\n          }\n\n          try {\n            setCookies('docId', res['docId'], {\n              maxAge: 60 * 60 * 24,\n              sameSite: \"none\",\n              secure: true\n            });\n          } catch (err) {}\n\n          setSuggestions(tempArray);\n        });\n      }\n    }, typeDelay);\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, [searchKeyword]);\n\n  function get_suggestions(text, doc_id, userId) {\n    var formData = new FormData();\n    formData.append(\"text\", text);\n    formData.append(\"origin\", origin);\n\n    if (doc_id) {\n      formData.append(\"doc_id\", parameters.doc_id);\n    }\n\n    return fetch(API_ENDPOINT + 'get_suggestions/', {\n      method: 'POST',\n      headers: {\n        'Authorization': AUTH_KEY,\n        'X-Tnl-User-Id': userId\n      },\n      body: formData\n    });\n  }\n\n  function openHistory(ques) {\n    setPageLoaded(false);\n    window.setTimeout(function () {\n      setPageLoaded(true);\n    }, 3000);\n    clearSearch();\n    removeCookies('pMatch');\n    setCookies('searchedText', ques.searchText ? ques.searchText : ' ', {\n      maxAge: 60 * 60 * 24,\n      sameSite: \"none\",\n      secure: true\n    });\n    localStorage.removeItem('imageSearched');\n    setCookies('isImageSearch', false, {\n      maxAge: 60 * 60 * 24,\n      sameSite: \"none\",\n      secure: true\n    });\n    removeCookies('topMatchedSubject');\n  }\n\n  function openQuestion(ques, i) {\n    googleAnalytics('similar_match_suggestion_click', 'click');\n    setPageLoaded(false);\n    removeCookies('pMatch');\n    window.setTimeout(function () {\n      setPageLoaded(true);\n    }, 3000);\n    triggerAnalytics('realtimeSuggestion', i, getCookie('docId'));\n    setCookies('searchedText', document.getElementById('searchInput').value, {\n      maxAge: 60 * 60 * 24,\n      sameSite: \"none\",\n      secure: true\n    });\n    localStorage.removeItem('imageSearched');\n    setCookies('isImageSearch', false, {\n      maxAge: 60 * 60 * 24,\n      sameSite: \"none\",\n      secure: true\n    });\n    removeCookies('topMatchedSubject');\n    clearSearch();\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_searchBarHolder\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_searchBar\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_searchbuttonHolder\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_buttonHolder\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    onClick: function onClick() {\n      return customSearch(searchKeyword);\n    },\n    src: \"https://search-static-stg.byjusweb.com/assets/SearchIcon1.png\",\n    width: \"24\",\n    height: \"24\",\n    alt: \"SearchIcon\"\n  }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"searchInput\",\n    name: \"searchInput\",\n    type: \"text\",\n    placeholder: \"Search for questions & chapters\",\n    onFocus: function onFocus() {\n      setInputFocus(true);\n      showHistory(5);\n    },\n    onKeyPress: function onKeyPress(e) {\n      enterButtonPressed(e);\n    },\n    onKeyUp: function onKeyUp(e) {\n      return searchInput(e.target.value);\n    },\n    autoComplete: \"off\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_buttonContainer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_buttonHolder\n  }, (inputFocus || suggestions.length > 0 || history.length > 0) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_crossButtonHolder\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.byjus_search_widget_icon,\n    onClick: function onClick() {\n      return clearSearch();\n    },\n    src: \"https://search-static-stg.byjusweb.com/assets/cancel.webp\",\n    width: \"14\",\n    height: \"14\",\n    alt: \"CrossIcon\"\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: inputFocus == true ? styles.byjus_search_widget_buttonHolder + ' ' + styles.showindesktop : styles.byjus_search_widget_buttonHolder\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_showinmobile\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_cameraButtonHolder1\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.byjus_search_widget_icon,\n    onClick: function onClick() {\n      return cameraClick();\n    },\n    src: \"https://search-static-stg.byjusweb.com/assets/Camera.png\",\n    width: \"24\",\n    height: \"24\",\n    alt: \"CameraIcon\"\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_showindesktop\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_cameraButtonHolder2\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.byjus_search_widget_icon,\n    onClick: function onClick() {\n      return imgSearch();\n    },\n    src: \"https://search-static-stg.byjusweb.com/assets/Camera.png\",\n    width: \"24\",\n    height: \"24\",\n    alt: \"CameraIcon\"\n  }))))), suggestions.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_suggestionHolder\n  }, suggestions.map(function (el, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: 'suggestion_' + i\n    }, el.href && /*#__PURE__*/React.createElement(\"a\", {\n      href: el.href ? absolutePath + '/question-answer/' + el.href + '/' : absolutePath + '/question-answer/search/ques?id=' + el.question_id,\n      style: {\n        textDecoration: 'none',\n        color: 'unset'\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.byjus_search_widget_suggestionBox,\n      onClick: function onClick() {\n        openQuestion(el, i);\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MathJaxContext, {\n      config: MathjaxConfig\n    }, /*#__PURE__*/React.createElement(MathJax, null, /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: removeOptions(el.question_text) || ''\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://search-static-stg.byjusweb.com/assets/SearchRecommendation.png\",\n      width: \"24\",\n      height: \"24\",\n      alt: \"search-recommendation\"\n    })))));\n  })), suggestions.length == 0 && history.length > 0 && !searchKeyword && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.byjus_search_widget_suggestionHolder\n  }, history.map(function (el, i) {\n    return /*#__PURE__*/React.createElement(\"a\", {\n      key: 'history_' + i,\n      href: el.href ? absolutePath + '/question-answer/' + el.href + '/' : absolutePath + '/question-answer/search/' + encodeURI(encode(el.searchText)),\n      style: {\n        textDecoration: 'none',\n        color: 'unset'\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.byjus_search_widget_historyBox,\n      onClick: function onClick() {\n        openHistory(el);\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.byjus_search_widget_clockIcon\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://search-static-stg.byjusweb.com/assets/SearchHistory.png\",\n      width: \"20\",\n      height: \"20\",\n      alt: \"search-history\"\n    })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MathJaxContext, {\n      config: MathjaxConfig\n    }, /*#__PURE__*/React.createElement(MathJax, null, /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: removeOptions(el.searchText) || ''\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://search-static-stg.byjusweb.com/assets/SearchRecommendation.png\",\n      width: \"24\",\n      height: \"24\",\n      alt: \"search-recommendation\"\n    }))));\n  }))));\n};\n\nexport { SearchbarComponent };","map":{"version":3,"mappings":"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","names":["SearchbarComponent","props","useState","open","setOpen","pageLoaded","setPageLoaded","searchKeyword","setSearchKeyword","suggestions","setSuggestions","history","setHistory","inputFocus","setInputFocus","openMobileCam","setopenMobileCam","openDesktopPopup","setOpenDesktopPopup","imgUploaded","setimgUploaded","focusSearchbar","setFocusSearchbar","typeDelay","origin","API_ENDPOINT","AUTH_KEY","useEffect","console","log","timeoutId","setTimeout","get_suggestions","getCookie","then","r","json","res","tempArray","i","length","push","setCookies","maxAge","sameSite","secure","err","clearTimeout","text","doc_id","userId","formData","FormData","append","parameters","fetch","method","headers","body","openHistory","ques","window","clearSearch","removeCookies","searchText","localStorage","removeItem","openQuestion","googleAnalytics","triggerAnalytics","document","getElementById","value","React","className","styles","byjus_search_widget_searchBarHolder","byjus_search_widget_searchBar","byjus_search_widget_searchbuttonHolder","byjus_search_widget_buttonHolder","onClick","customSearch","src","width","height","alt","id","name","type","placeholder","onFocus","showHistory","onKeyPress","e","enterButtonPressed","onKeyUp","searchInput","target","autoComplete","byjus_search_widget_buttonContainer","byjus_search_widget_crossButtonHolder","byjus_search_widget_icon","showindesktop","byjus_search_widget_showinmobile","byjus_search_widget_cameraButtonHolder1","cameraClick","byjus_search_widget_showindesktop","byjus_search_widget_cameraButtonHolder2","imgSearch","byjus_search_widget_suggestionHolder","map","el","key","href","absolutePath","question_id","style","textDecoration","color","byjus_search_widget_suggestionBox","MathJaxContext","config","MathjaxConfig","MathJax","dangerouslySetInnerHTML","__html","removeOptions","question_text","encodeURI","encode","byjus_search_widget_historyBox","byjus_search_widget_clockIcon"],"sources":["../src/index.js"],"sourcesContent":["import React, { useEffect, useState} from \"react\";\nimport { MathJax, MathJaxContext } from \"better-react-mathjax\";\nimport styles from './styles.module.css'\n\nexport const SearchbarComponent = (props) => {\n  var [open, setOpen] = useState(false);\n  var [ pageLoaded, setPageLoaded] = useState(true); \n  var [searchKeyword, setSearchKeyword] = useState(null);\n  var [suggestions, setSuggestions] = useState([]);\n  var [history, setHistory] = useState([]);\n  var [inputFocus, setInputFocus] = useState(false);\n  var [openMobileCam, setopenMobileCam] = useState(false);\n  var [openDesktopPopup, setOpenDesktopPopup] = useState(false);\n  var [imgUploaded, setimgUploaded] = useState(false);\n  var [focusSearchbar, setFocusSearchbar] = useState(false);\n  const typeDelay = 500;\n  const origin = 'learnportal2'\n  const API_ENDPOINT = 'https://search-api-stg.byjusweb.com/byjus/web_search/'\n  const AUTH_KEY = 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiI2MDVhMzc5MTg2M2YzYTViZTE0YjE0NzgiLCJyb2xlIjoiYnlqdS1hbnN3ZXItcmV2aWV3ZXIiLCJ0aW1lc3RhbXAiOiIyMDIxLTA1LTEwVDEwOjM0OjM4LjUyNloiLCJpYXQiOjE2MjA2NDI4Nzh9.f5xoVcgtvWAOwOnbc-VCMDjRwt7P4Pax5ftUL2TRUJQ';\n\n  useEffect(()=>{\n    console.log('Hello')\n  },[]);\n\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n        if(searchKeyword){\n            get_suggestions(searchKeyword, getCookie('docId'), getCookie('userToken')).then(r=>r.json()).then(res=>{\n                var tempArray = [];\n\n                for(var i=0;i<res['suggestions'].length;i++){\n                    tempArray.push(\n                        {\n                            'question_text' : res['suggestions'][i]['mathjax_question'],\n                            'question_id' : res['suggestions'][i]['qid'],\n                            'href' : res['suggestions'][i]['href']\n                        }\n                    )\n                }\n                try{\n                    setCookies('docId', res['docId'], {maxAge: 60 * 60 * 24, sameSite: \"none\", secure: true});\n                }\n                catch(err){}\n                setSuggestions(tempArray);\n            })\n        }\n        }, typeDelay);\n    \n    return () => clearTimeout(timeoutId);\n    }, [searchKeyword]);\n\n    function get_suggestions(text, doc_id, userId) {\n        const formData = new FormData();\n        formData.append(\"text\", text);\n        formData.append(\"origin\", origin)\n        if(doc_id){\n            formData.append(\"doc_id\", parameters.doc_id);\n        }\n        \n        return fetch(API_ENDPOINT + 'get_suggestions/', {\n            method: 'POST',\n            headers: {\n                'Authorization' : AUTH_KEY,\n                'X-Tnl-User-Id' : userId\n            },\n            body: formData,\n        })\n\n    }\n\n    function openHistory(ques){\n        setPageLoaded(false);\n        window.setTimeout(()=>{setPageLoaded(true)},3000);\n        clearSearch();\n        removeCookies('pMatch');\n        setCookies('searchedText', ques.searchText ? ques.searchText : ' ', {maxAge: 60 * 60 * 24, sameSite: \"none\", secure: true})\n        localStorage.removeItem('imageSearched');\n        setCookies('isImageSearch', false, {maxAge : 60 * 60 * 24, sameSite: \"none\", secure: true})\n        removeCookies('topMatchedSubject');\n    }\n\n\n    function openQuestion(ques, i){\n        googleAnalytics('similar_match_suggestion_click', 'click'); \n        setPageLoaded(false);\n        removeCookies('pMatch');\n        window.setTimeout(()=>{setPageLoaded(true)},3000);\n        triggerAnalytics('realtimeSuggestion', i, getCookie('docId'))\n        setCookies('searchedText', document.getElementById('searchInput').value, {maxAge: 60 * 60 * 24, sameSite: \"none\", secure: true})\n        localStorage.removeItem('imageSearched');\n        setCookies('isImageSearch', false, {maxAge : 60 * 60 * 24, sameSite: \"none\", secure: true});\n        removeCookies('topMatchedSubject');\n        clearSearch();\n    }\n\n    return(\n          <div className={styles.byjus_search_widget_searchBarHolder}>\n            <div className={styles.byjus_search_widget_searchBar}>\n                <div className={styles.byjus_search_widget_searchbuttonHolder}>\n                    <div className={styles.byjus_search_widget_buttonHolder}>\n                        {/* <img className={styles.byjus_search_widget_icon} onClick={() => customSearch(searchKeyword)} src={assetURL + \"/Search.png\"} width=\"44\" height=\"44\" alt=\"SearchIcon\"></img> */}\n                        <img  onClick={() => customSearch(searchKeyword)} src={\"https://search-static-stg.byjusweb.com/assets/SearchIcon1.png\"} width=\"24\" height=\"24\" alt=\"SearchIcon\"></img>\n                    </div>\n                </div>\n                <div>\n                    <input id=\"searchInput\" name=\"searchInput\" type=\"text\" placeholder={`Search for questions & chapters`}  onFocus={() => {setInputFocus(true);showHistory(5);}} onKeyPress={(e) => {enterButtonPressed(e)}} onKeyUp={(e)=>searchInput(e.target.value)} autoComplete=\"off\"></input>\n                </div>\n                <div className={styles.byjus_search_widget_buttonContainer}>\n                    <div className={styles.byjus_search_widget_buttonHolder}>\n                        { (inputFocus || suggestions.length>0 || history.length>0) && <div className={styles.byjus_search_widget_crossButtonHolder}>\n                            <img className={styles.byjus_search_widget_icon} onClick={() => clearSearch()} src={\"https://search-static-stg.byjusweb.com/assets/cancel.webp\"} width=\"14\" height=\"14\" alt=\"CrossIcon\"></img>\n                        </div>\n                        }\n                    </div>\n\n                    <div className={ inputFocus == true ? (styles.byjus_search_widget_buttonHolder + ' ' + styles.showindesktop) : (styles.byjus_search_widget_buttonHolder)}>\n                        <div className={styles.byjus_search_widget_showinmobile}>\n                            <div className={styles.byjus_search_widget_cameraButtonHolder1}>\n                                <img className={styles.byjus_search_widget_icon} onClick={() => cameraClick()} src={\"https://search-static-stg.byjusweb.com/assets/Camera.png\"} width=\"24\" height=\"24\" alt=\"CameraIcon\"></img>\n                            </div>\n                        </div>\n                        <div className={styles.byjus_search_widget_showindesktop}>\n                            <div className={styles.byjus_search_widget_cameraButtonHolder2}>\n                                <img className={styles.byjus_search_widget_icon} onClick={() => imgSearch()} src={\"https://search-static-stg.byjusweb.com/assets/Camera.png\"} width=\"24\" height=\"24\" alt=\"CameraIcon\"></img>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                {suggestions.length>0 &&\n                    <div className={styles.byjus_search_widget_suggestionHolder}>\n                        {suggestions.map((el,i) =>\n                        <div key={'suggestion_' + i}>\n                        {el.href &&\n                        <a  href={el.href ? (absolutePath + '/question-answer/' + el.href + '/') : (absolutePath + '/question-answer/search/ques?id=' + el.question_id)} style={{textDecoration: 'none', color: 'unset'}}>\n                            <div className={styles.byjus_search_widget_suggestionBox} onClick={() => {openQuestion(el, i);}}>\n                                <div>\n                                <MathJaxContext config={MathjaxConfig}>\n                                    <MathJax>\n                                        <div dangerouslySetInnerHTML={{ __html: removeOptions(el.question_text) || ''}}></div>\n                                    </MathJax>\n                                </MathJaxContext>\n                                </div>\n                                <div>\n                                    <img src={\"https://search-static-stg.byjusweb.com/assets/SearchRecommendation.png\"} width=\"24\" height=\"24\" alt=\"search-recommendation\"></img>\n                                </div>\n                            </div>\n                        </a>\n                        }\n                        </div>\n                        )}\n                    </div>\n                }\n                {suggestions.length == 0 && history.length > 0 && !searchKeyword &&\n                    <div className={styles.byjus_search_widget_suggestionHolder}>\n                        {history.map((el,i) =>\n                          <a key={'history_' + i} href={el.href ? (absolutePath + '/question-answer/' + el.href + '/') : (absolutePath + '/question-answer/search/' + encodeURI(encode(el.searchText)))} style={{textDecoration: 'none', color: 'unset'}}>\n                            <div className={styles.byjus_search_widget_historyBox} onClick={() => {openHistory(el);}}>\n                                <div className={styles.byjus_search_widget_clockIcon}>\n                                    <img src={\"https://search-static-stg.byjusweb.com/assets/SearchHistory.png\"} width=\"20\" height=\"20\" alt=\"search-history\"></img>\n                                </div>\n                                <div>\n                                    <MathJaxContext config={MathjaxConfig}>\n                                        <MathJax>\n                                            <div dangerouslySetInnerHTML={{ __html: removeOptions(el.searchText) || ''}}></div>\n                                        </MathJax>\n                                    </MathJaxContext>\n                                </div>\n                                <div>\n                                    <img src={\"https://search-static-stg.byjusweb.com/assets/SearchRecommendation.png\"} width=\"24\" height=\"24\" alt=\"search-recommendation\"></img>\n                                </div>\n                            </div>\n                        </a>\n                        )}\n                    </div>\n                }\n            </div>\n        </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}